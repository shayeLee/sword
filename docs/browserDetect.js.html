<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>browserDetect.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="animate.html">animate</a><ul class='methods'><li data-type='method'><a href="animate.html#.rAF">rAF</a></li></ul></li><li><a href="arrTool.html">arrTool</a><ul class='methods'><li data-type='method'><a href="arrTool.html#.enumFlagsThrustReverser">enumFlagsThrustReverser</a></li></ul></li><li><a href="bomTool.html">bomTool</a></li><li><a href="crypto.html">crypto</a><ul class='methods'><li data-type='method'><a href="crypto.html#.generateUploadParams">generateUploadParams</a></li><li data-type='method'><a href="crypto.html#.randomCode">randomCode</a></li></ul></li><li><a href="dateTool.html">dateTool</a><ul class='methods'><li data-type='method'><a href="dateTool.html#.getCurrWeekDates">getCurrWeekDates</a></li><li data-type='method'><a href="dateTool.html#.str2time">str2time</a></li><li data-type='method'><a href="dateTool.html#.time2str">time2str</a></li></ul></li><li><a href="domTool.html">domTool</a><ul class='methods'><li data-type='method'><a href="domTool.html#.getElementLeft">getElementLeft</a></li><li data-type='method'><a href="domTool.html#.getElementTop">getElementTop</a></li><li data-type='method'><a href="domTool.html#.getScrollBarWidth">getScrollBarWidth</a></li><li data-type='method'><a href="domTool.html#.getWindowSize">getWindowSize</a></li></ul></li><li><a href="fileTool.html">fileTool</a><ul class='methods'><li data-type='method'><a href="fileTool.html#.getImgBase64">getImgBase64</a></li></ul></li><li><a href="functional.html">functional</a><ul class='methods'><li data-type='method'><a href="functional.html#.debounce">debounce</a></li><li data-type='method'><a href="functional.html#.throttle">throttle</a></li></ul></li><li><a href="objTool.html">objTool</a><ul class='methods'><li data-type='method'><a href="objTool.html#.obj2query">obj2query</a></li></ul></li><li><a href="strTool.html">strTool</a><ul class='methods'><li data-type='method'><a href="strTool.html#.query2obj">query2obj</a></li></ul></li><li><a href="variables.html">variables</a><ul class='methods'><li data-type='method'><a href="variables.html#.cloneDeep">cloneDeep</a></li><li data-type='method'><a href="variables.html#.isCorrect">isCorrect</a></li><li data-type='method'><a href="variables.html#.isEmptyObject">isEmptyObject</a></li><li data-type='method'><a href="variables.html#.isObject">isObject</a></li><li data-type='method'><a href="variables.html#.isPromise">isPromise</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">browserDetect.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @namespace bomTool
 */

import { isCorrect } from '../src/index';

class BrowserDetect {

  dataBrowser = [
    {
      // UC浏览器
      string: navigator.userAgent,
      subString: 'UBrowser',
      identity: 'UBrowser',
      versionSearch: 'Chrome'
    },
    {
      // 欧朋浏览器
      string: navigator.userAgent,
      subString: 'OPR',
      identity: 'OPR',
      versionSearch: 'Chrome'
    },
    {
      // Maxthon 遨游浏览器
      string: navigator.userAgent,
      subString: 'Maxthon',
      identity: 'Maxthon',
      versionSearch: 'Chrome'
    },
    {
      // 搜狗浏览器
      string: navigator.userAgent,
      subString: 'MetaSr',
      identity: 'MetaSr',
      versionSearch: 'Chrome'
    },
    {
      // 猎豹浏览器
      string: navigator.userAgent,
      subString: 'LBBROWSER',
      identity: 'LBBROWSER',
      versionSearch: 'Chrome'
    },
    {
      // Edge
      string: navigator.userAgent,
      subString: 'Edge',
      identity: 'Edge',
      versionSearch: 'Chrome'
    },
    {
      // QQ浏览器
      string: navigator.userAgent,
      subString: 'QQBrowser',
      identity: 'QQBrowser',
      versionSearch: 'Chrome'
    },
    {
      // 百度浏览器
      string: navigator.userAgent,
      subString: 'BIDUBrowser',
      identity: 'BIDUBrowser',
      versionSearch: 'Chrome'
    },
    {
      string: navigator.userAgent,
      subString: 'Chrome',
      identity: 'Chrome',
    },
    {
      string: navigator.userAgent,
      subString: 'Apple',
      identity: 'Safari',
      versionSearch: 'Version'
    },
    {
      string: navigator.userAgent,
      subString: 'Firefox',
      identity: 'Firefox'
    },
    {
      // IE11之前的版本
      string: navigator.userAgent,
      subString: 'MSIE',
      identity: 'IE',
      versionSearch: 'MSIE'
    },
    {
      string: navigator.userAgent,
      subString: 'Gecko',
      identity: 'Mozilla',
      versionSearch: 'rv'
    }
  ];
  dataEngine = [
    {
      string: navigator.userAgent,
      subString: 'Trident/',
      identity: 'Trident'
    },
    {
      string: navigator.userAgent,
      subString: 'WebKit/',
      identity: 'WebKit'
    },
    {
      string: navigator.userAgent,
      subString: 'Gecko/',
      identity: 'Gecko'
    }
  ];
  dataOS = [
    {
      string: navigator.platform,
      subString: 'Win',
      identity: 'Windows'
    },
    {
      string: navigator.platform,
      subString: 'Mac',
      identity: 'OSX'
    },
    {
      string: navigator.platform,
      subString: 'iPhone',
      identity: 'iOS'
    },
    {
      string: navigator.platform,
      subString: 'Linux',
      identity: 'Linux'
    }
  ];

  searchOS() {
    for (let i = 0; i &lt; this.dataOS.length; i++) {
      let dataString = this.dataOS[i].string;
      if (!isCorrect(dataString)) return;
      if (dataString.indexOf(this.dataOS[i].subString) > -1) {
        if (navigator.userAgent.indexOf('Android') > -1) {
          return 'Android'
        } else if (
          navigator.userAgent.indexOf('iPhone') > -1 ||
          navigator.userAgent.indexOf('iPad') > -1
        ) {
          return 'iOS'
        }
        return this.dataOS[i].identity;
      }
    }
  }

  searchBrowser() {
    for (let i = 0; i &lt; this.dataBrowser.length; i++) {
      let dataString = this.dataBrowser[i].string;
      if (!isCorrect(dataString)) return;
      if (dataString.indexOf(this.dataBrowser[i].subString) > -1) {
        this.browserVersionSearchString = this.dataBrowser[i].versionSearch || this.dataBrowser[i].identity;
        return this.dataBrowser[i].identity;
      }
    }
  }

  searchBrowserVersion(dataString) {
    let index = dataString.indexOf(this.browserVersionSearchString);
    if (index === -1) return;
    const versionMatchArr = dataString.match(new RegExp(`${this.browserVersionSearchString}(\/*)[0-9\.]*(?=\s*)`));
    if (!isCorrect(versionMatchArr)) return;
    return versionMatchArr[0].replace(/[^\.\d]/g, '');
  }

  searchRenderingEngine() {
    for (let i = 0; i &lt; this.dataEngine.length; i++) {
      let dataString = this.dataEngine[i].string;
      if (!isCorrect(dataString)) return;
      if (dataString.indexOf(this.dataEngine[i].subString) > -1) {
        this.renderingEngineVersionSearchString = this.dataEngine[i].identity;
        return this.dataEngine[i].identity;
      }
    }
  }

  searchRenderingEngineVersion(dataString) {
    let index = dataString.indexOf(this.renderingEngineVersionSearchString);
    if (index === -1) return;
    const versionMatchArr = dataString.match(new RegExp(`${this.renderingEngineVersionSearchString}(\/*)[0-9\.]*(?=\s*)`));
    if (!isCorrect(versionMatchArr)) return;
    return versionMatchArr[0].replace(/[^\.\d]/g, '');
  }

  OS = this.searchOS() || 'An unknown OS';

  browser = this.searchBrowser() || 'An unknown browser';

  browserVersion = this.searchBrowserVersion(navigator.userAgent) || this.searchBrowserVersion(navigator.appVersion) || 'an unknown browserVersion';

  renderingEngine = this.searchRenderingEngine() || 'An unknown renderingEngine';

  renderingEngineVersion = this.searchRenderingEngineVersion(navigator.userAgent) || this.searchRenderingEngineVersion(navigator.appVersion) || 'an unknown engineVersion';

}

const browserDetect = new BrowserDetect();

export default {
  OS: browserDetect.OS,
  browser: browserDetect.browser,
  browserVersion: browserDetect.browserVersion,
  renderingEngine: browserDetect.renderingEngine,
  renderingEngineVersion: browserDetect.renderingEngineVersion
};</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a> on Mon Jul 08 2019 09:08:28 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
